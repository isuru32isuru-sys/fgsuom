<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conference Dashboard 2025</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Lucide for icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* A little custom style to ensure responsive charts fill their containers */
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
        }
    </style>
</head>
<body class="bg-gray-50">

    <div class="min-h-screen p-4 sm:p-6">
        <div class="max-w-7xl mx-auto">
            <h1 class="text-3xl font-bold text-gray-900 mb-8">Conference Dashboard 2025</h1>
            
            <!-- Navigation Tabs -->
            <div class="flex flex-wrap space-x-1 mb-6 bg-white rounded-lg shadow p-1" id="nav-buttons">
                <button data-view="overview" class="nav-button flex-1 py-2 px-4 rounded-md transition-colors capitalize">overview</button>
                <button data-view="funding" class="nav-button flex-1 py-2 px-4 rounded-md transition-colors capitalize">funding</button>
                <button data-view="participants" class="nav-button flex-1 py-2 px-4 rounded-md transition-colors capitalize">participants</button>
                <button data-view="acceptance" class="nav-button flex-1 py-2 px-4 rounded-md transition-colors capitalize">acceptance</button>
                <button data-view="details" class="nav-button flex-1 py-2 px-4 rounded-md transition-colors capitalize">details</button>
            </div>

            <!-- View Containers -->
            <div id="views-container">

                <!-- Overview View -->
                <div id="overview-view" class="view space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between mb-4">
                                <i data-lucide="calendar" class="h-8 w-8 text-blue-600"></i>
                                <span class="text-2xl font-bold" id="total-conferences"></span>
                            </div>
                            <h3 class="text-gray-600">Total Conferences</h3>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between mb-4">
                                <i data-lucide="dollar-sign" class="h-8 w-8 text-green-600"></i>
                                <span class="text-2xl font-bold" id="total-funding"></span>
                            </div>
                            <h3 class="text-gray-600">Total Funding (Rs)</h3>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between mb-4">
                                <i data-lucide="users" class="h-8 w-8 text-purple-600"></i>
                                <span class="text-2xl font-bold" id="total-participants"></span>
                            </div>
                            <h3 class="text-gray-600">Total Participants</h3>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <div class="flex items-center justify-between mb-4">
                                <i data-lucide="trending-up" class="h-8 w-8 text-orange-600"></i>
                                <span class="text-2xl font-bold" id="avg-acceptance"></span>
                            </div>
                            <h3 class="text-gray-600">Avg Acceptance Rate</h3>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-semibold mb-4">Conference Timeline</h3>
                            <div class="chart-container" style="height: 250px;"><canvas id="timeline-chart"></canvas></div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-semibold mb-4">Indexing Status</h3>
                            <div class="chart-container" style="height: 250px;"><canvas id="indexing-chart"></canvas></div>
                        </div>
                    </div>
                </div>

                <!-- Funding View -->
                <div id="funding-view" class="view bg-white rounded-lg shadow p-6 hidden">
                    <h3 class="text-xl font-semibold mb-6">Funding Distribution by Conference</h3>
                    <div class="chart-container"><canvas id="funding-chart"></canvas></div>
                </div>

                <!-- Participants View -->
                <div id="participants-view" class="view bg-white rounded-lg shadow p-6 hidden">
                    <h3 class="text-xl font-semibold mb-6">Participant Distribution</h3>
                    <div class="chart-container"><canvas id="participants-chart"></canvas></div>
                </div>

                <!-- Acceptance View -->
                <div id="acceptance-view" class="view space-y-6 hidden">
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-xl font-semibold mb-6">Acceptance Rates by Conference</h3>
                        <div class="chart-container" style="height: 300px;"><canvas id="acceptance-rate-chart"></canvas></div>
                    </div>
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-xl font-semibold mb-6">Papers Submitted vs Accepted</h3>
                        <div class="chart-container" style="height: 300px;"><canvas id="papers-chart"></canvas></div>
                    </div>
                </div>

                <!-- Details Table View -->
                <div id="details-view" class="view bg-white rounded-lg shadow overflow-hidden hidden">
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Conference</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Dates & Venue</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Participants</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Funding (Rs Mn)</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Review Model</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Indexing</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Accept Rate</th>
                                </tr>
                            </thead>
                            <tbody id="details-table-body" class="bg-white divide-y divide-gray-200">
                                <!-- JS will populate this -->
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- DATA ---
    const conferences = [
        { acronym: 'ICCPP 2025', fullName: 'Intl. Conf. on Cities, People & Places (11th)', dates: '12-13 Dec', month: 12, venue: 'Havelock City', localParticipants: 30, intlParticipants: 20, totalParticipants: 50, fundingTotal: 0.60, fundingProc: 0.05, fundingServices: 0.55, reviewModel: 'Double-blind', indexing: 'Not indexed', acceptanceRate: 70, papersAccepted: 18, papersSubmitted: 26 },
        { acronym: 'ICBR 2025', fullName: 'Intl. Conf. on Business Research (8th)', dates: '2 Dec', month: 12, venue: 'FoB Auditorium', localParticipants: 90, intlParticipants: 10, totalParticipants: 100, fundingTotal: 0.25, fundingProc: 0.18, fundingServices: 0.07, reviewModel: 'Double-blind', indexing: 'Scopus application under way', acceptanceRate: 75, papersAccepted: 30, papersSubmitted: 40 },
        { acronym: 'WCS 2025', fullName: 'World Construction Symp. (13th)', dates: '15-16 Aug', month: 8, venue: 'SL Foundation (hybrid)', localParticipants: 200, intlParticipants: 30, totalParticipants: 230, fundingTotal: 0.50, fundingProc: 0, fundingServices: 0.50, reviewModel: 'Double-blind', indexing: 'Scopus-indexed since 2019', acceptanceRate: 83, papersAccepted: 87, papersSubmitted: 105 },
        { acronym: 'FARU 2025', fullName: 'Faculty of Architecture Research Unit Conf. (18th)', dates: '5-6 Dec', month: 12, venue: 'UoM', localParticipants: 45, intlParticipants: 20, totalParticipants: 65, fundingTotal: 0.60, fundingProc: 0.10, fundingServices: 0.50, reviewModel: 'Double-blind', indexing: 'SLJOL; Scopus resubmission pending', acceptanceRate: 81, papersAccepted: 65, papersSubmitted: 80 },
        { acronym: 'ISERME 2025', fullName: 'Intl. Symp. on Earth Resources (9th)', dates: '19-20 Sep', month: 9, venue: 'UoM', localParticipants: 100, intlParticipants: 20, totalParticipants: 120, fundingTotal: 0.50, fundingProc: 0.30, fundingServices: 0.20, reviewModel: 'Single-blind (3 reviewers)', indexing: 'Targeting Springer/Scopus 2026', acceptanceRate: 70, papersAccepted: 47, papersSubmitted: 67 },
        { acronym: 'ICITR 2025', fullName: 'IT Research Conf. (10th)', dates: '8-12 Dec', month: 12, venue: 'FIT UoM', localParticipants: 150, intlParticipants: 20, totalParticipants: 170, fundingTotal: 0.60, fundingProc: 0.10, fundingServices: 0.50, reviewModel: 'Double-blind (3 reviewers)', indexing: 'IEEE Xplore / Scopus indexed', acceptanceRate: 45, papersAccepted: 77, papersSubmitted: 171 },
        { acronym: 'AAS-Med 2025', fullName: 'Annual Academic Sessions, Medicine (2nd)', dates: 'Research-Week 2025', month: 0, venue: 'Rupert Peiris Aud.', localParticipants: 450, intlParticipants: 0, totalParticipants: 450, fundingTotal: 0.60, fundingProc: 0.60, fundingServices: 0, reviewModel: 'Double-blind (2 reviewers)', indexing: 'Abstract book only (ISSN 3051-5475)', acceptanceRate: 100, papersAccepted: 40, papersSubmitted: 40 }
    ];

    // --- GLOBAL STATE & ELEMENTS ---
    let activeView = 'overview';
    const chartInstances = {}; // To store created chart objects
    const navButtons = document.querySelectorAll('.nav-button');
    const views = document.querySelectorAll('.view');

    // --- DATA PROCESSING ---
    const totalFunding = conferences.reduce((sum, conf) => sum + conf.fundingTotal, 0);
    const totalParticipants = conferences.reduce((sum, conf) => sum + conf.totalParticipants, 0);
    const avgAcceptanceRate = conferences.reduce((sum, conf) => sum + conf.acceptanceRate, 0) / conferences.length;
    
    // --- VIEW SWITCHING LOGIC ---
    function switchView(viewName) {
        activeView = viewName;
        
        // Update button styles
        navButtons.forEach(button => {
            const isSelected = button.dataset.view === activeView;
            button.classList.toggle('bg-blue-600', isSelected);
            button.classList.toggle('text-white', isSelected);
            button.classList.toggle('text-gray-600', !isSelected);
            button.classList.toggle('hover:bg-gray-100', !isSelected);
        });

        // Show/hide views
        views.forEach(view => {
            view.classList.toggle('hidden', view.id !== `${activeView}-view`);
        });

        // Render charts for the active view if they haven't been rendered yet
        renderActiveViewCharts();
    }

    // --- CHART RENDERING ---
    function renderActiveViewCharts() {
        switch (activeView) {
            case 'overview':
                if (!chartInstances.timeline) renderTimelineChart();
                if (!chartInstances.indexing) renderIndexingChart();
                break;
            case 'funding':
                if (!chartInstances.funding) renderFundingChart();
                break;
            case 'participants':
                if (!chartInstances.participants) renderParticipantsChart();
                break;
            case 'acceptance':
                if (!chartInstances.acceptanceRate) renderAcceptanceRateChart();
                if (!chartInstances.papers) renderPapersChart();
                break;
        }
    }
    
    function renderTimelineChart() {
        const monthlyDistribution = [
            { month: 'Aug', count: 1 }, { month: 'Sep', count: 1 },
            { month: 'Dec', count: 4 }, { month: 'TBD', count: 1 }
        ];
        const ctx = document.getElementById('timeline-chart').getContext('2d');
        chartInstances.timeline = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: monthlyDistribution.map(d => d.month),
                datasets: [{
                    label: 'Conferences',
                    data: monthlyDistribution.map(d => d.count),
                    backgroundColor: '#3b82f6'
                }]
            },
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } } }
        });
    }

    function renderIndexingChart() {
        const indexingStatus = {
            labels: ['Indexed', 'In Progress', 'Not Indexed'],
            data: [2, 3, 2],
            colors: ['#10b981', '#f59e0b', '#ef4444']
        };
        const ctx = document.getElementById('indexing-chart').getContext('2d');
        chartInstances.indexing = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: indexingStatus.labels,
                datasets: [{
                    data: indexingStatus.data,
                    backgroundColor: indexingStatus.colors
                }]
            },
            options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } }
        });
    }

    function renderFundingChart() {
        const ctx = document.getElementById('funding-chart').getContext('2d');
        chartInstances.funding = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: conferences.map(c => c.acronym),
                datasets: [
                    { label: 'Proceedings', data: conferences.map(c => c.fundingProc), backgroundColor: '#8b5cf6' },
                    { label: 'Services', data: conferences.map(c => c.fundingServices), backgroundColor: '#10b981' }
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                scales: { x: { stacked: true }, y: { stacked: true, title: { display: true, text: 'Funding (Rs Mn)' } } }
            }
        });
    }
    
    function renderParticipantsChart() {
        const ctx = document.getElementById('participants-chart').getContext('2d');
        chartInstances.participants = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: conferences.map(c => c.acronym),
                datasets: [
                    { label: 'Local', data: conferences.map(c => c.localParticipants), backgroundColor: '#3b82f6' },
                    { label: 'International', data: conferences.map(c => c.intlParticipants), backgroundColor: '#f59e0b' }
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                scales: { y: { title: { display: true, text: 'Number of Participants' } } }
            }
        });
    }
    
    function renderAcceptanceRateChart() {
        const ctx = document.getElementById('acceptance-rate-chart').getContext('2d');
        chartInstances.acceptanceRate = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: conferences.map(c => c.acronym),
                datasets: [{
                    label: 'Rate',
                    data: conferences.map(c => c.acceptanceRate),
                    backgroundColor: '#10b981'
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } },
                scales: { y: { title: { display: true, text: 'Acceptance Rate (%)' } } }
            }
        });
    }

    function renderPapersChart() {
        const ctx = document.getElementById('papers-chart').getContext('2d');
        chartInstances.papers = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: conferences.map(c => c.acronym),
                datasets: [
                    { label: 'Submitted', data: conferences.map(c => c.papersSubmitted), backgroundColor: '#ef4444' },
                    { label: 'Accepted', data: conferences.map(c => c.papersAccepted), backgroundColor: '#10b981' }
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                scales: { y: { title: { display: true, text: 'Number of Papers' } } }
            }
        });
    }

    // --- TABLE POPULATION ---
    function renderDetailsTable() {
        const tableBody = document.getElementById('details-table-body');
        tableBody.innerHTML = ''; // Clear previous content
        
        conferences.forEach(conf => {
            const getIndexingClass = (indexing) => {
                if (indexing.includes('indexed') && !indexing.includes('Not')) return 'bg-green-100 text-green-800';
                if (indexing.includes('application') || indexing.includes('pending') || indexing.includes('Targeting')) return 'bg-yellow-100 text-yellow-800';
                return 'bg-red-100 text-red-800';
            };
            
            const fundingDetails = [
                conf.fundingProc > 0 ? `${conf.fundingProc} proc` : '',
                conf.fundingServices > 0 ? `${conf.fundingServices} serv` : ''
            ].filter(Boolean).join(' + ');

            const row = `
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div>
                            <div class="text-sm font-medium text-gray-900">${conf.acronym}</div>
                            <div class="text-xs text-gray-500">${conf.fullName}</div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${conf.dates}</div>
                        <div class="text-xs text-gray-500">${conf.venue}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${conf.totalParticipants} total</div>
                        <div class="text-xs text-gray-500">${conf.localParticipants} local / ${conf.intlParticipants} int'l</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${conf.fundingTotal.toFixed(2)}</div>
                        <div class="text-xs text-gray-500">${fundingDetails}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${conf.reviewModel}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getIndexingClass(conf.indexing)}">
                            ${conf.indexing}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">${conf.acceptanceRate}%</div>
                        <div class="text-xs text-gray-500">${conf.papersAccepted}/${conf.papersSubmitted}</div>
                    </td>
                </tr>
            `;
            tableBody.innerHTML += row;
        });
    }

    // --- INITIALIZATION ---
    function init() {
        // Populate overview cards
        document.getElementById('total-conferences').textContent = conferences.length;
        document.getElementById('total-funding').textContent = `${totalFunding.toFixed(2)}M`;
        document.getElementById('total-participants').textContent = totalParticipants;
        document.getElementById('avg-acceptance').textContent = `${avgAcceptanceRate.toFixed(0)}%`;

        // Populate the details table (so it's ready when switched to)
        renderDetailsTable();

        // Set up navigation
        navButtons.forEach(button => {
            button.addEventListener('click', () => switchView(button.dataset.view));
        });

        // Set initial view
        switchView('overview');
        
        // Render all icons on the page
        lucide.createIcons();
    }

    init();
});
</script>

</body>
</html>
